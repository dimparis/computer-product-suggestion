@using CPS_Solution.Controllers;
@using CPS_Solution.EntityFramework;
@using CPS_Solution.Areas.Admin.Models;
@{
    ViewBag.Title = "fixedErrorProduct";
    Layout = null;
    List<LapData> list = ViewBag.listproduct;
    List<LapData> listError = ViewBag.listerror;
    List<List<LapData>> listDup = ViewBag.listduplicate;
    // danh sách lỗi khi lỗi quá nhiều
    List<LapData> danhsachlaploi = ViewBag.danhsachlaploi;
    int countlistdup = 0;
    int countlist = 0;
    if (listDup != null)
    {
        countlistdup = listDup.Count;
    }
    if (list != null)
    {
        countlist = list.Count;
    }
    List<List<LapData>> listDupnew = ViewBag.listduplicatenew;
    int countlistdup1 = 0;
    if (listDupnew != null)
    {
        countlistdup1 = listDupnew.Count;
    }
    // dòng bị lỗi
    List<String> errorLineLap = ViewBag.errorLineLap;
    int sodongloi = 0;
    String[] loiName = null; int checkName = 0;
    String[] loiImageLink = null;
    String[] loiDisplay = null;
    String[] loiCPU = null;
    String[] loiHDD = null;
    String[] loiVGA = null;
    String[] loiRam = null;
    if (errorLineLap != null)
    {
        // số dòng bị lỗi
        sodongloi = Convert.ToInt32(errorLineLap[0]);
        // lỗi Name
        loiName = errorLineLap[1].ToString().Split(',');
        // lỗi link image
        loiImageLink = errorLineLap[2].ToString().Split(',');
        // lỗi Name
        loiDisplay = errorLineLap[3].ToString().Split(',');
        // lỗi Name
        loiCPU = errorLineLap[4].ToString().Split(',');
        // lỗi Name
        loiHDD = errorLineLap[5].ToString().Split(',');
        // lỗi Name
        loiVGA = errorLineLap[6].ToString().Split(',');
        // lỗi Name
        loiRam = errorLineLap[7].ToString().Split(',');
    }
}
  <!--tab2-------------------------------------------------------------------------------------------------- <p class="el-finder-err" style="display: block;width:90%;height:1px;margin-left:5%"><strong></strong></p>----->
            <div id="ErrorID">
                <div class="da-message error">
                    Lỗi dữ liệu:
                                        <ul>
                                           
                                        
                     @if (errorLineLap != null&&listError!=null)
                     {                                                                          
                         if (loiName.Length > 0)
                         {                     
                    <li>Tên sản phẩm phải từ 5 đến 100 ký tự!</li>                 
                         }
                         if (loiImageLink.Length > 0)
                         {                     
                     <li>Đường dẫn ảnh không đúng định dạng!</li>                   
                         }
                         if (loiDisplay.Length > 0)
                         {                     
                    <li>Display của sản phẩm phải từ 5 tới 100 ký tự!</li>  
                         }
                         if (loiCPU.Length > 0)
                         {                     
                     <li>CPU của sản phẩm phải từ 5 đến 100 ký tự!</li>        
                         }
                         if (loiHDD.Length > 0)
                         {                     
                     <li>HDD của sản phẩm phải là số!</li>        
                         }
                         if (loiVGA.Length > 0)
                         {                     
                     <li>HDD của sản phẩm phải là số!</li>  
                         }
                         if (loiRam.Length > 0)
                         {                     
                    <li>Ram của sản phẩm phải là số!</li>  
                         }
                     }
                                            </ul>
                </div>
                <div class="da-panel collapsible">
                    <div class="da-panel-header">
                        <span class="da-panel-title">
                            <img src="~/Areas/Admin/Dandelion/images/icons/black/16/list.png" alt="">
                            Dữ liệu lỗi.
                        </span>

                        <span class="da-panel-toggler"></span>
                    </div>

                    <div class="da-panel-content">
                        <table class="da-table">
                            <thead>
                                <tr role="row">
                                        <th  style="width: 40px;">STT</th>
                                        <th style="width: 180px;">Tên máy</th>
                                        <th style="width: 200px;">Địa chỉ ảnh</th>
                                        <th style="width: 100px;">CPU</th>
                                        <th style="width: 100px;">VGA</th>
                                        <th style="width: 50px;">HDD (G)</th>
                                        <th style="width: 100px;">Display (Pixel)</th>
                                        <th style="width: 40px;">Ram (G)</th>
                                        <th style="width: 50px;">Thực hiện</th>
                                </tr>
                            </thead>

                            <tbody role="alert" aria-live="polite" aria-relevant="all">
                                @if (listError != null)
                                {
                                    foreach (LapData p in listError)
                                    {
                                                         
                                    <tr class="odd">
                                         <td style="width: 15px;" class=" ">@(Convert.ToInt32(@p.stt) + 2) </td>      
                                                <!------------------------ Tên------------------------------>                                        
                                                @for (int i = 0; i < loiName.Length; i++)
                                                {
                                                    int j = (Convert.ToInt32(@p.stt) + 2);
                                                    if (loiName[i].Equals(j.ToString()))
                                                    {
                                                        <td class=" "> <textarea id="idName_@p.stt" cols="25" rows="1" style="border-color:red"> @p.Name</textarea></td>
                                                        checkName++;
                                                    }
                                                }                  
                                                @if (checkName < 1)
                                                {
                                                  <td class=" "> <textarea id="idName_@p.stt"  cols="25" rows="1"> @p.Name</textarea></td> 
                                                }               
                                                @if (checkName > 0)
                                                {
                                                    checkName--;
                                                }        
                                                <!------------------------ Imagelink------------------------------> 
                                                 @for (int i = 0; i < loiImageLink.Length; i++)
                                                 {
                                                     int j = (Convert.ToInt32(@p.stt) + 2);
                                                     if (loiImageLink[i].Equals(j.ToString()))
                                                     {
                                                        <td class=" "> <textarea id="idImageLink_@p.stt" cols="40" rows="3" style="border-color:red"> @p.Imagelink</textarea></td>
                                                         checkName++;
                                                     }
                                                 }                  
                                                @if (checkName < 1)
                                                {
                                                  <td class=" ">   <textarea id="idImageLink_@p.stt" cols="40" rows="3">@p.Imagelink</textarea> </td> 
                                                }               
                                                @if (checkName > 0)
                                                {
                                                    checkName--;
                                                }                                                                                                            
                                               
                                                 <!------------------------ CPU------------------------------>    
                                                 @for (int i = 0; i < loiCPU.Length; i++)
                                                 {
                                                     int j = (Convert.ToInt32(@p.stt) + 2);
                                                     if (loiCPU[i].Equals(j.ToString()))
                                                     {
                                                        <td class=" "><textarea id="idCPU_@p.stt"  cols="20" rows="1" style="border-color:red"> @p.CPU</textarea></td>
                                                         checkName++;
                                                     }
                                                 }                  
                                                @if (checkName < 1)
                                                {
                                                   <td class=" "><textarea id="idCPU_@p.stt"  cols="20" rows="1"> @p.CPU</textarea></td>
                                                }               
                                                @if (checkName > 0)
                                                {
                                                    checkName--;
                                                }                                                          
                                                <!------------------------ VGA------------------------------>   
                                                 @for (int i = 0; i < loiVGA.Length; i++)
                                                 {
                                                     int j = (Convert.ToInt32(@p.stt) + 2);
                                                     if (loiVGA[i].Equals(j.ToString()))
                                                     {
                                                        <td class=" "> <textarea id="idVGA_@p.stt" cols="20" rows="1" style="border-color:red"> @p.VGA</textarea></td>
                                                         checkName++;
                                                     }
                                                 }                  
                                                @if (checkName < 1)
                                                {
                                                   <td class=" "> <textarea id="idVGA_@p.stt"  cols="20" rows="1"> @p.VGA</textarea></td>
                                                }               
                                                @if (checkName > 0)
                                                {
                                                    checkName--;
                                                }                       

                                                <!------------------------ HDD------------------------------>   
                                                  @for (int i = 0; i < loiHDD.Length; i++)
                                                  {
                                                      int j = (Convert.ToInt32(@p.stt) + 2);
                                                      if (loiHDD[i].Equals(j.ToString()))
                                                      {
                                                        <td class=" "><textarea id="idHDD_@p.stt" cols="3" rows="1" style="border-color:red"> @p.HDD</textarea></td>
                                                          checkName++;
                                                      }
                                                  }                  
                                                @if (checkName < 1)
                                                {
                                                    <td class=" "><textarea id="idHDD_@p.stt" cols="3" rows="1"> @p.HDD</textarea></td>
                                                }               
                                                @if (checkName > 0)
                                                {
                                                    checkName--;
                                                }                        
                                                <!------------------------ Display------------------------------>    
                                                @for (int i = 0; i < loiDisplay.Length; i++)
                                                {
                                                    int j = (Convert.ToInt32(@p.stt) + 2);
                                                    if (loiDisplay[i].Equals(j.ToString()))
                                                    {
                                                        <td class=" "> <textarea id="idDisplay_@p.stt" cols="10" rows="1" style="border-color:red"> @p.Display</textarea></td>
                                                        checkName++;
                                                    }
                                                }                  
                                                @if (checkName < 1)
                                                {
                                                    <td class=" "> <textarea id="idDisplay_@p.stt" cols="10" rows="1"> @p.Display</textarea></td>
                                                }               
                                                @if (checkName > 0)
                                                {
                                                    checkName--;
                                                }                        
                                                <!------------------------ RAM------------------------------>    
                                                @for (int i = 0; i < loiRam.Length; i++)
                                                {
                                                    int j = (Convert.ToInt32(@p.stt) + 2);
                                                    if (loiRam[i].Equals(j.ToString()))
                                                    {
                                                        <td class=" "> <textarea id="idRam_@p.stt" cols="3" rows="1" style="border-color:red"> @p.RAM</textarea></td>
                                                        checkName++;
                                                    }
                                                }                  
                                                @if (checkName < 1)
                                                {
                                                    <td class=" "> <textarea id="idRam_@p.stt" cols="3" rows="1"> @p.RAM</textarea></td>
                                                }               
                                                @if (checkName > 0)
                                                {
                                                    checkName--;
                                                }         
                                        <td class=" ">
                                            <a onclick="luusanphamloi(@p.stt)">
                                                <img src="~/Areas/Admin/Dandelion/images/icons/color/accept.png" />Lưu</a>
                                        </td>
                                    </tr> 
                                                      
                                    }
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <!--ket thuc tab2------------------------------------------------------------------------------------------------------------------------------------------------------>
