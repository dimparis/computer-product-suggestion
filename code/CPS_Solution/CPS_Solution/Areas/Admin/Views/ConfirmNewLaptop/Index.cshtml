@using CPS_Solution.Controllers;
@using CPS_Solution.EntityFramework;
@using CPS_Solution.Areas.Admin.Models;
@{
    ViewBag.Title = "Index";
    Layout = "~/Areas/Admin/Views/Shared/_AdminLayout.cshtml";
    List<Product> listproconfirm = ViewBag.listproconfirm;
}

@section headScript
{

    <!-- iOS webapp icons -->
    <link rel="apple-touch-icon" href="touch-icon-iphone.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="touch-icon-ipad.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="touch-icon-retina.png" />

      <!-- CSS Reset -->
    <link rel="stylesheet" type="text/css" href="~/Areas/Admin/Dandelion/css/reset.css" media="screen" />
    <!--  Fluid Grid System -->
    <link rel="stylesheet" type="text/css" href="~/Areas/Admin/Dandelion/css/fluid.css" media="screen" />
    <!-- Theme Stylesheet -->
    <link rel="stylesheet" type="text/css" href="~/Areas/Admin/Dandelion/css/dandelion.theme.css" media="screen" />
    <!--  Main Stylesheet -->
    <link rel="stylesheet" type="text/css" href="~/Areas/Admin/Dandelion/css/dandelion.css" media="screen" />
    <!-- Demo Stylesheet -->
    <link rel="stylesheet" type="text/css" href="~/Areas/Admin/Dandelion/css/demo.css" media="screen" />
   <!-- jQuery JavaScript File -->
    <script type="text/javascript" src="~/Areas/Admin/Dandelion/js/jquery-1.7.2.min.js"></script>
    <!-- jQuery-UI JavaScript Files -->
    <script type="text/javascript" src="~/Areas/Admin/Dandelion/jui/js/jquery-ui-1.8.20.min.js"></script>
    <link rel="stylesheet" type="text/css" href="~/Areas/Admin/Dandelion/jui/css/jquery.ui.all.css" media="screen" />
        <script type="text/javascript" src="~/Areas/Admin/Dandelion/jui/js/jquery.ui.timepicker.min.js"></script>
    <script type="text/javascript" src="~/Areas/Admin/Dandelion/jui/js/jquery.ui.touch-punch.min.js"></script>
    <!-- Plugin Files -->
    <!-- FileInput Plugin -->
    <script type="text/javascript" src="~/Areas/Admin/Dandelion/js/jquery.fileinput.js"></script>
    <!-- Placeholder Plugin -->
    <script type="text/javascript" src="~/Areas/Admin/Dandelion/js/jquery.placeholder.js"></script>
    <!-- Mousewheel Plugin -->
    <script type="text/javascript" src="~/Areas/Admin/Dandelion/js/jquery.mousewheel.min.js"></script>
    <!-- Scrollbar Plugin -->
    <script type="text/javascript" src="~/Areas/Admin/Dandelion/js/jquery.tinyscrollbar.min.js"></script>
    <!-- Tooltips Plugin -->
    <script type="text/javascript" src="~/Areas/Admin/Dandelion/plugins/tipsy/jquery.tipsy-min.js"></script>
    <link rel="stylesheet" href="~/Areas/Admin/Dandelion/plugins/tipsy/tipsy.css" />
    <!-- Demo JavaScript Files -->
    <script type="text/javascript" src="~/Areas/Admin/Dandelion/js/demo/demo.icons.js"></script>
    <!-- Core JavaScript Files -->
    <script type="text/javascript" src="~/Areas/Admin/Dandelion/js/core/dandelion.core.js"></script>
    <!-- Customizer JavaScript File (remove if not needed) -->
    <script type="text/javascript" src="~/Areas/Admin/Dandelion/js/core/dandelion.customizer.js"></script>

    <!--  Demo JavaScript Files popup Ui Popup 
    <script type="text/javascript" src="~/Areas/Admin/Dandelion/js/demo/demo.ui.js"></script>-->
    <!-- jGrowl Plugin   -->
    <script type="text/javascript" src="~/Areas/Admin/Dandelion/plugins/jgrowl/jquery.jgrowl.min.js"></script>
    <link rel="stylesheet" href="~/Areas/Admin/Dandelion/plugins/jgrowl/jquery.jgrowl.css" media="screen" />

    <!-- DataTables Plugin -->
    <script type="text/javascript" src="~/Areas/Admin/Dandelion/plugins/datatables/jquery.dataTables.min.js"></script>
    <!-- Demo JavaScript Files -->
    <script type="text/javascript" src="~/Areas/Admin/Dandelion/js/demo/demo.tables.js"></script>
    <script type="text/javascript" src="@Url.Content("~/Areas/Admin/Dandelion/js/demo/demo.form.js")"></script>
    <!-- Chosen Plugin -->
    <script type="text/javascript" src="@Url.Content("~/Areas/Admin/Dandelion/plugins/chosen/chosen.jquery.js")"></script>
    <link rel="stylesheet" href="@Url.Content("~/Areas/Admin/Dandelion/plugins/chosen/chosen.css")" media="screen" />

    <!----------------------------- Lên datatable Plugin------------------------------------------>
    <script type="text/javascript" src="@Url.Content("~/Areas/Admin/Dandelion/js/jquery.debouncedresize.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/Areas/Admin/Dandelion/js/jquery.metadata.js")"></script>
    <script src="@Url.Content("~/Scripts/jquery-2.1.0.min.js")"></script>
    <script src="@Url.Content("~/Scripts/jquery-ui-1.10.4.min.js")"></script>
    <script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script>
}
@section sidebar
{
    <!-- CSS Reset -->
    <!-- Main Navigation -->
    <div id="da-main-nav" class="da-button-container">
        <ul>
            <li class="active">
                <a href="dashboard.html">
                    <!-- Icon Container -->
                    <span class="da-nav-icon">
                        <img src="~/Areas/Admin/Dandelion/images/icons/black/32/home.png" alt="Dashboard" />
                    </span>
                    Dashboard
                </a>
            </li>
            <li>
                <a href="#">
                    <!-- Nav Notification -->
                    <span class="da-nav-count">32</span>
                    <!-- Icon Container -->
                    <span class="da-nav-icon">
                        <img src="~/Areas/Admin/Dandelion/images/icons/black/32/graph.png" alt="Charts" />
                    </span>
                    Statistics and Charts
                </a>
                <ul class="closed">
                    <li><a href="statistic.html">Statistic Widgets</a></li>
                    <li><a href="charts.html">Chart Gallery</a></li>
                </ul>
            </li>
            <li>
                <a href="calendar.html">
                    <!-- Icon Container -->
                    <span class="da-nav-icon">
                        <img src="~/Areas/Admin/Dandelion/images/icons/black/32/day_calendar.png" alt="Calendar" />
                    </span>
                    Calendar
                </a>
            </li>
            <li>
                <a href="file.html">
                    <!-- Icon Container -->
                    <span class="da-nav-icon">
                        <img src="~/Areas/Admin/Dandelion/images/icons/black/32/file_cabinet.png" alt="File Handling" />
                    </span>
                    File Handling
                </a>
            </li>
            <li>
                <a href="table.html">
                    <!-- Icon Container -->
                    <span class="da-nav-icon">
                        <img src="~/Areas/Admin/Dandelion/images/icons/black/32/table_1.png" alt="Table" />
                    </span>
                    Table
                </a>
            </li>
            <li>
                <a href="#">
                    <!-- Icon Container -->
                    <span class="da-nav-icon">
                        <img src="~/Areas/Admin/Dandelion/images/icons/black/32/create_write.png" alt="Form" />
                    </span>
                    Form
                </a>
                <ul>
                    <li><a href="form-layouts.html">Layouts</a></li>
                    <li><a href="form-elements.html">Elements</a></li>
                    <li><a href="form-validation.html">Validation</a></li>
                </ul>
            </li>
            <li>
                <a href="ui.html">
                    <!-- Icon Container -->
                    <span class="da-nav-icon">
                        <img src="~/Areas/Admin/Dandelion/images/icons/black/32/settings.png" alt="" />
                    </span>
                    UI Elements
                </a>
            </li>
            <li>
                <a href="widgets.html">
                    <!-- Icon Container -->
                    <span class="da-nav-icon">
                        <img src="~/Areas/Admin/Dandelion/images/icons/black/32/cog_4.png" alt="Widgets" />
                    </span>
                    Widgets
                </a>
            </li>
            <li>
                <a href="#">
                    <!-- Icon Container -->
                    <span class="da-nav-icon">
                        <img src="~/Areas/Admin/Dandelion/images/icons/black/32/word_documents_1.png" alt="Layout and Typography" />
                    </span>
                    Layout and Typography
                </a>
                <ul class="closed">
                    <li><a href="grids.html">Grids and Panels</a></li>
                    <li><a href="typography.html">Typography</a></li>
                </ul>
            </li>
            <li>
                <a href="gallery.html">
                    <!-- Icon Container -->
                    <span class="da-nav-icon">
                        <img src="~/Areas/Admin/Dandelion/images/icons/black/32/images_2.png" alt="Gallery" />
                    </span>
                    Gallery
                </a>
            </li>
            <li>
                <a href="error.html">
                    <!-- Icon Container -->
                    <span class="da-nav-icon">
                        <img src="~/Areas/Admin/Dandelion/images/icons/black/32/alert.png" alt="Error Pages" />
                    </span>
                    Error Page (404)
                </a>
            </li>
            <li>
                <a href="icons.html">
                    <!-- Icon Container -->
                    <span class="da-nav-icon">
                        <img src="~/Areas/Admin/Dandelion/images/icons/black/32/pacman.png" alt="Icons" />
                    </span>
                    Icons
                </a>
            </li>
        </ul>
    </div>
}
@section mainHeader
{
}
@section footScript
{
}
<div class="grid_2" style="width:360px">
    <div class="da-panel-widget">
        <ul class="da-summary-stat">
            <li>
                <a href="#">
                    <span class="da-summary-icon" style="background-color: #656565;">
                        <img src="/Areas/Admin/Dandelion/images/icons/white/32/cog_4.png" alt="">
                    </span>
                    <span class="da-summary-text">
                        <span class="value up">Xác nhận Laptop mới</span>
                        <span class="label">Kích hoạt hoặc ánh xạ Laptop</span>
                    </span>
                </a>
            </li>
        </ul>
    </div>
</div>
<div class="clear"></div>
<!----------------------------------------------- Content Area --------------------------------------------->
<div id="idTable">
<div  class="da-panel collapsible">
    <div class="da-panel-header">
        <span class="da-panel-title">
            <img src="~/Areas/Admin/Dandelion/images/icons/black/16/list.png" alt="">
            Kích hoạt Laptop mới trong cơ sở dữ liệu.
        </span>

        <span class="da-panel-toggler"></span>
    </div>
    <div class="da-panel-content">
        <div id="da-ex-datatable-numberpaging_wrapper" class="dataTables_wrapper" role="grid">


            <table id="da-ex-datatable-numberpaging" class="da-table dataTable" aria-describedby="da-ex-datatable-numberpaging_info">
                <thead>
                    <tr role="row">
                        <th class="sorting_asc" role="columnheader" tabindex="0" aria-controls="da-ex-datatable-numberpaging" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Rendering engine: activate to sort column descending" style="width: 40px;">ID</th>
                        <th class="sorting" role="columnheader" tabindex="0" aria-controls="da-ex-datatable-numberpaging" rowspan="1" colspan="1" aria-label="Browser: activate to sort column ascending" style="width: 180px;">Tên Laptop</th>
                        <th class="sorting" role="columnheader" tabindex="0" aria-controls="da-ex-datatable-numberpaging" rowspan="1" colspan="1" aria-label="Browser: activate to sort column ascending" style="width: 50px;">Kích Hoạt</th>
                        <th class="sorting" role="columnheader" tabindex="0" aria-controls="da-ex-datatable-numberpaging" rowspan="1" colspan="1" aria-label="CSS grade: activate to sort column ascending" style="width: 50px;">Thực hiện</th>
                    </tr>
                </thead>

                <tbody role="alert" aria-live="polite" aria-relevant="all">

                    @if (listproconfirm != null)
                    {
                        foreach (Product h in listproconfirm)
                        {
                        <tr id="IdTr@(h.ID)" class="odd">

                            <td class=" sorting_1">@h.ID</td>
                            <td class=" ">
                                <label style="width: 100px;">@h.Name</label></td>
                          
                            <td class=" "> <input style="width:52px" onclick="ActiveLaptop(@h.ID)" value="Kích Hoạt" class="da-button green">
                            </td>
                            <td class=" ">
                           
                                <a onclick="showPopupEdit(@h.ID)">
                                    <img src="~/Areas/Admin/Dandelion/images/icons/color/pencil.png">
                                    Mapping</a>

                                <!----------------Popup sửa sản phẩm đúng----------->
                                <div id="Edit-@h.ID-Popup-div" style="display: none;">
                                    <div class="da-panel">
                                        <div class="da-panel-content">
                                            <form class="da-form">
                                                <div class="da-form-inline">
                                                     <div style="display:none" class="da-form-row">
                                                        <label>Laptop</label>
                                                        <div class="da-form-item">
                                                            <span class="formNote">Tên thành phần</span>
                                                            <input disabled id="idNameProduct@(h.ID)" value="@h.Name" type="text">
                                                            <input hidden id="idproduct@(h.ID)" value="@h.ID" type="text">
                                                        </div>
                                                    </div>
                                                    <div style="display:none" class="da-form-row">
                                                        <label>Loại</label>
                                                        <div class="da-form-item">
                                                            <span class="formNote">Loại thành phần</span>
                                                            <input id="idCodetypeHard@(h.ID)" disabled value="@h.Name" type="text">
                                                        </div>
                                                    </div>
                                                    <div style="display:none" class="da-form-row">
                                                        <label>Tên Laptop</label>
                                                        <div class="da-form-item">
                                                            <span class="formNote">Tên thành phần phải từ 5 tới 100 ký tự.</span>
                                                            <input disabled name="idNameHard@(h.ID)" id="Hardware" value="@h.Name"  type="text">
                                                        </div>
                                                    </div>
                                                    
                                                    <div class="da-form-row">
                                                                <label>Laptop Mapping</label>
                                                                <div class="da-form-item">
                                                                    <span class="formNote">Danh sách các Laptop</span>
                                                                    @Html.DropDownList("ProductList", ViewBag.ProductList as List<SelectListItem>, new { @class = "chzn-select", id = @h.ID,@style = "width: 250px;" })
                                                                </div>
                                                     </div> 
                                                    <div class="da-button-row">
                                                        <input onclick="EditHardware
    
    (@h.ID)" type="button" value="Lưu" class="da-button green">
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                  @*  <script type="text/javascript">
                                        var loai = $('#hiddenCodetype').val();
                                        $(document).ready(function () {
                                            $("#Hardware").autocomplete({
                                                source: function(request,response) {
                                                    $.ajax({
                                                        url: "../ConfirmNewHardware/AutoCompleteHardware",
                                                        type: "POST",
                                                        dataType: "json",
                                                        data: JSON.stringify({ term: request.term}),
                                                        contentType: 'application/json',
                                                        success: function (data) {
                                                            response($.map(data, function (item) {
                                                                return { label: item.Name, value: item.Name };
                                                            }))
                                                        }
                                                    })
                                                },
                                                messages: {
                                                    noResults: "", results: ""
                                                }
                                            });
                                        })
</script>*@
                                </div>

                                <!----------------Popup------------------>
                            </td>
                        </tr>
                        }
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>
</div>
<script type="text/javascript">
    $(document).ready(function () {
        $('.ui-autocomplete').css("z-index", "1000");
    });


</script>
<script>
    //Hiện popup để sửa 1 sản phẩm đúng.
    function showPopupEdit(i){
        $("#Edit-"+i+"-Popup-div").dialog({
            autoOpen: false, 
            title: "Xác nhận hoặc sửa thành phần mới", 
            width: "600", 
            modal: true             
            //buttons: [{
            //    text: "Đóng", 
            //    click: function() {
            //        $( this ).dialog( "close" );
            //    }}]
        });

        $("#Edit-"+i+"-Popup-div").dialog("option", {modal: true}).dialog("open");
        event.preventDefault();
		
    }

    //Load lại ajax
    function LoadTableAjax()
    {
        var string =  "ok";

        var postData = {stringid: string };
        $.ajax({
            type: "POST",
            url: "/Admin/ConfirmNewLaptop/LoadTableAjax",
            data: postData,
            success: function(data){
               $('#idTable').html(data);
            },

        });
    }

    //Kich hoạt 1 phần cứng
    function ActiveLaptop(id)
    {
        if (confirm("Bạn có chắc chắn muốn kích hoạt sản phẩm này?")) {
            var postData = {stringid: id };
            $.ajax({
                type: "POST",
                url: "/Admin/ConfirmNewLaptop/ActiveLaptop",
                data: postData,
                success: function(data){
                    // LoadTableAjax();
                    document.getElementById("IdTr"+id).style.display='none';
                },

            });
        }else {
                                               
        }
    }

    //
    function EditHardware(stt){   
        var div = document.getElementById(stt+"_chzn");
      //  var spans = div.getElementsByTagName("span");
     //   var nameHardware =  spans[0].innerHTML;
        var IdHardware =   $( "#"+stt ).val();
        var string = stt+'@@'+IdHardware;
        
        var postData = {HardInfo: string };
        $.ajax({
            type: "POST",
            url: "/Admin/ConfirmNewLaptop/MappingLaptop",
            data: postData,
            success: function(data){
                LoadTableAjax();
                $("#Edit-"+stt+"-Popup-div").dialog( "close");
            },

        });

    }
   
</script>
  <script>
      (function ($) {
          $(document).ready(function (e) {
              // dialog popup
              $("#da-ex-accordion, #da-ex-accordion-plain").accordion();

              $("#da-ex-tabs, #da-ex-tabs-plain").tabs();

              $("#da-ex-datepicker, #da-ex-datepicker-inline").datepicker({ showOtherMonths: true });

              $("#da-ex-datepicker-week").datepicker({ showOtherMonths: true, showWeek: true });

              $("#da-ex-datepicker-months").datepicker({ showOtherMonths: true, numberOfMonths: 3 });

              $("#da-ex-datetimepicker").datetimepicker();

              $("#da-ex-timepicker").timepicker({});

              $(".da-ex-buttons").button();

              $("#da-ex-buttons-radio, #da-ex-buttons-checkbox").buttonset();

              $("#da-ex-buttons-icon button:first").button({
                  icons: {
                      primary: "ui-icon-locked"
                  },
                  text: false
              }).next().button({
                  icons: {
                      primary: "ui-icon-locked"
                  }
              }).next().button({
                  icons: {
                      primary: "ui-icon-gear",
                      secondary: "ui-icon-triangle-1-s"
                  }
              }).next().button({
                  icons: {
                      primary: "ui-icon-gear",
                      secondary: "ui-icon-triangle-1-s"
                  },
                  text: false
              });

              var availableTags = [
                  "ActionScript",
                  "AppleScript",
                  "Asp",
                  "BASIC",
                  "C",
                  "C++",
                  "Clojure",
                  "COBOL",
                  "ColdFusion",
                  "Erlang",
                  "Fortran",
                  "Groovy",
                  "Haskell",
                  "Java",
                  "JavaScript",
                  "Lisp",
                  "Perl",
                  "PHP",
                  "Python",
                  "Ruby",
                  "Scala",
                  "Scheme"
              ];

              $("#da-ex-autocomplete").autocomplete({
                  source: availableTags
              });

              $("#da-ex-slider").slider();

              $("#da-ex-slider-range").slider({
                  range: true,
                  min: 0,
                  max: 500,
                  values: [75, 300],
                  slide: function (event, ui) {
                      $("#da-ex-slider-range-info .da-highlight").html("$" + ui.values[0] + " - $" + ui.values[1]);
                  }
              });

              $(".da-ex-color-slider").slider({
                  range: "min",
                  value: 45,
                  min: 1,
                  max: 100
              });

              $("#da-ex-slider-range-fixed").slider({
                  range: "min",
                  value: 37,
                  min: 1,
                  max: 700,
                  slide: function (event, ui) {
                      $("#da-ex-slider-range-fixed-info .da-highlight").html("$" + ui.value);
                  }
              });

              $("#da-slider-equalizer > span").each(function () {
                  var value = parseInt($(this).text(), 10);

                  $(this).empty().slider({
                      value: value,
                      range: "min",
                      animate: true,
                      orientation: "vertical"
                  });
              });

              $(".da-ex-color-pb, #da-ex-pb, #da-ex-pba").each(function () {
                  $(this).progressbar({
                      value: 25 + Math.floor(Math.random() * 50)
                  });
              });

              $("#da-ex-pba-trigger").bind('click', function (e) {
                  $(this).parent().next("#da-ex-pba").progressbar('value', 20 + Math.floor(Math.random() * 80));
                  e.preventDefault();
              });

              $("#da-ex-dialog-div").dialog({
                  autoOpen: false,
                  title: "Chọn log file bạn muốn ghi lại, để sau đó có thể tiếp tục xử lý.",
                  modal: true,
                  width: "550",
                  buttons: [{
                      text: "Đóng",
                      click: function () {
                          $(this).dialog("close");
                      }
                  }]
              });




              $("#da-ex-dialog").bind("click", function (event) {
                  $("#da-ex-dialog-div").dialog("option", { modal: false }).dialog("open");
                  event.preventDefault();
              });
              $("#da-ex-dialog-modal").bind("click", function (event) {
                  $("#da-ex-dialog-div").dialog("option", { modal: true }).dialog("open");
                  event.preventDefault();
              });
              $("#da-ex-dialog-form").bind("click", function (event) {
                  $("#da-ex-dialog-form-div").dialog("option", { modal: true }).dialog("open");
                  event.preventDefault();
              });
              //  Growl Notifications 
              if ($.jGrowl) {

                  $("#da-ex-growl-2").bind("click", function (event) {
                      $.jGrowl("Con cò bé bé", { header: "Nhắc nhở!", position: "bottom-right" });
                  });
              }
          });
      })(jQuery); 		</script>