@using PagedList.Mvc
@using CPS_Solution.CommonClass
@model IEnumerable<CPS_Solution.EntityFramework.ParseAttribute>

@{
    ViewBag.Title = "Index";
    Layout = "~/Areas/Admin/Views/Shared/_AdminLayout.cshtml";
}
@section headScript
{
<!-- CSS Reset -->
<link rel="stylesheet" type="text/css" href="@Url.Content("~/Areas/Admin/Dandelion/css/reset.css")" media="screen" />
<!--  Fluid Grid System -->
<link rel="stylesheet" type="text/css" href="@Url.Content("~/Areas/Admin/Dandelion/css/fluid.css")" media="screen" />
<!-- Theme Stylesheet -->
<link rel="stylesheet" type="text/css" href="@Url.Content("~/Areas/Admin/Dandelion/css/dandelion.theme.css")" media="screen" />
<!--  Main Stylesheet -->
<link rel="stylesheet" type="text/css" href="@Url.Content("~/Areas/Admin/Dandelion/css/dandelion.css")" media="screen" />
<!-- Demo Stylesheet -->
<link rel="stylesheet" type="text/css" href="@Url.Content("~/Areas/Admin/Dandelion/css/demo.css")" media="screen" />
<!-- jQuery JavaScript File -->
<script type="text/javascript" src="@Url.Content("~/Areas/Admin/Dandelion/js/jquery-1.7.2.min.js")"></script>
<!-- jQuery-UI JavaScript Files -->
<script type="text/javascript" src="@Url.Content("~/Areas/Admin/Dandelion/jui/js/jquery-ui-1.8.20.min.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Areas/Admin/Dandelion/jui/js/jquery.ui.timepicker.min.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Areas/Admin/Dandelion/jui/js/jquery.ui.touch-punch.min.js")"></script>
    <!-- Placeholder Plugin -->
<script type="text/javascript" src="@Url.Content("~/Areas/Admin/Dandelion/js/jquery.placeholder.js")"></script>
<!-- Mousewheel Plugin -->
<script type="text/javascript" src="@Url.Content("~/Areas/Admin/Dandelion/js/jquery.mousewheel.min.js")"></script>
<!-- Scrollbar Plugin -->
<script type="text/javascript" src="@Url.Content("~/Areas/Admin/Dandelion/js/jquery.tinyscrollbar.min.js")"></script>
<!-- Tooltips Plugin -->
<script type="text/javascript" src="@Url.Content("~/Areas/Admin/Dandelion/plugins/tipsy/jquery.tipsy-min.js")"></script>

<link rel="stylesheet" type="text/css" href="@Url.Content("~/Areas/Admin/Dandelion/jui/css/jquery.ui.all.css")" media="screen" />
<link rel="stylesheet" href="@Url.Content("~/Areas/Admin/Dandelion/plugins/tipsy/tipsy.css")" />
    <!-- Core JavaScript Files -->
<script type="text/javascript" src="@Url.Content("~/Areas/Admin/Dandelion/js/core/dandelion.core.js")"></script>


<script type="text/javascript">
        $(function () {
            $(".da-button").click(function () {
                // Get the id from the link
                var recordToSet = $(this).attr("data-id");

                if (recordToSet != '') {

                    // Perform the ajax post
                    $.post("/Parser/SetActive", { "id": recordToSet },
                        function (data) {
                            location.reload();
                        });
                }
            });

        });
</script>
}

@section sidebar
{
      <!-- Main Navigation -->
                    <div id="da-main-nav" class="da-button-container">
                        <ul>
                            <li class="active">
                            	<a href="dashboard.html">
                                	<!-- Icon Container -->
                                	<span class="da-nav-icon">
                                    	<img src="Areas/Admin/Dandelion/images/icons/black/32/home.png" alt="Dashboard" />
                                    </span>
                                	Dashboard
                                </a>
                            </li>
                            <li>
                            	<a href="#">
                                	<!-- Nav Notification -->
                                    <span class="da-nav-count">32</span>
                                	<!-- Icon Container -->
                                	<span class="da-nav-icon">
                                    	<img src="Areas/Admin/Dandelion/images/icons/black/32/graph.png" alt="Charts" />
                                    </span>
                                	Statistics and Charts
                                </a>
                                <ul class="closed">
                                	<li><a href="statistic.html">Statistic Widgets</a></li>
                                	<li><a href="charts.html">Chart Gallery</a></li>
                                </ul>
                            </li>
                            <li>
                            	<a href="calendar.html">
                                	<!-- Icon Container -->
                                	<span class="da-nav-icon">
                                    	<img src="Areas/Admin/Dandelion/images/icons/black/32/day_calendar.png" alt="Calendar" />
                                    </span>
                                	Calendar
                                </a>
                            </li>
                            <li>
                            	<a href="file.html">
                                	<!-- Icon Container -->
                                	<span class="da-nav-icon">
                                    	<img src="Areas/Admin/Dandelion/images/icons/black/32/file_cabinet.png" alt="File Handling" />
                                    </span>
                                	File Handling
                                </a>
                            </li>
                            <li>
                            	<a href="table.html">
                                	<!-- Icon Container -->
                                	<span class="da-nav-icon">
                                    	<img src="Areas/Admin/Dandelion/images/icons/black/32/table_1.png" alt="Table" />
                                    </span>
                                	Table
                                </a>
                            </li>
                            <li>
                            	<a href="#">
                                	<!-- Icon Container -->
                                	<span class="da-nav-icon">
                                    	<img src="Areas/Admin/Dandelion/images/icons/black/32/create_write.png" alt="Form" />
                                    </span>
                                	Form
                                </a>
                                <ul>
                                	<li><a href="form-layouts.html">Layouts</a></li>
                                	<li><a href="form-elements.html">Elements</a></li>
                                	<li><a href="form-validation.html">Validation</a></li>
                                </ul>
                            </li>
                            <li>
                            	<a href="ui.html">
                                	<!-- Icon Container -->
                                	<span class="da-nav-icon">
                                    	<img src="Areas/Admin/Dandelion/images/icons/black/32/settings.png" alt="" />
                                    </span>
                                    UI Elements
                                </a>
                            </li>
                            <li>
                            	<a href="widgets.html">
                                	<!-- Icon Container -->
                                	<span class="da-nav-icon">
                                    	<img src="Areas/Admin/Dandelion/images/icons/black/32/cog_4.png" alt="Widgets" />
                                    </span>
                                    Widgets
                                </a>
                            </li>
                            <li>
                            	<a href="#">
                                	<!-- Icon Container -->
                                	<span class="da-nav-icon">
                                    	<img src="Areas/Admin/Dandelion/images/icons/black/32/word_documents_1.png" alt="Layout and Typography" />
                                    </span>
                                    Layout and Typography
                                </a>
                                <ul class="closed">
                                	<li><a href="grids.html">Grids and Panels</a></li>
                                	<li><a href="typography.html">Typography</a></li>
                                </ul>
                            </li>
                            <li>
                            	<a href="gallery.html">
                                	<!-- Icon Container -->
                                	<span class="da-nav-icon">
                                    	<img src="Areas/Admin/Dandelion/images/icons/black/32/images_2.png" alt="Gallery" />
                                    </span>
                                    Gallery
                                </a>
                            </li>
                            <li>
                            	<a href="error.html">
                                	<!-- Icon Container -->
                                	<span class="da-nav-icon">
                                    	<img src="Areas/Admin/Dandelion/images/icons/black/32/alert.png" alt="Error Pages" />
                                    </span>
                                    Error Page (404)
                                </a>
                            </li>
                            <li>
                            	<a href="icons.html">
                                	<!-- Icon Container -->
                                	<span class="da-nav-icon">
                                    	<img src="Areas/Admin/Dandelion/images/icons/black/32/pacman.png" alt="Icons" />
                                    </span>
                                    Icons
                                </a>
                            </li>
                        </ul>
                    </div>
}
@section mainHeader
{
}
@section footScript
{
        <!-- DataTables Plugin -->
<script type="text/javascript" src="@Url.Content("~/Areas/Admin/Dandelion/plugins/datatables/jquery.dataTables.min.js")"></script>

<!-- Demo JavaScript Files -->
<script type="text/javascript" src="@Url.Content("~/Areas/Admin/Dandelion/js/demo/demo.tables.js")"></script>
}
<h2>Done /Admin</h2>
<div class="grid_4">
         <div class="da-panel-content">
            @if (TempData["create"] != null) 
            {
                 <div class="da-message success">
                        Parser mới đã được thêm vào hệ thống.
                 </div>
            }
            @if (TempData["edit"] != null) 
            {
                string statusMessage = TempData["edit"].ToString();
                if (statusMessage == "Success") 
                {
                     <div class="da-message success">
                        Parser đã được cập nhật thành công.
                 </div>
                }
                else if (statusMessage == "Failed") 
                {
                 <div class="da-message error">
                       Cập nhật parser thất bại. Xin vui lòng thử lại.
                 </div>
                }
            }
        </div>
</div>
<br/>
<br/>
 <div class="grid_4">
                        	<div class="da-panel collapsible">                                      	
                            	<div class="da-panel-header">
                                	<span class="da-panel-title">
                                        <img src="@Url.Content("~/Areas/Admin/Dandelion/images/icons/black/16/list.png")" alt="" />
                                        Danh sách các parser
                                        <input type="submit" value="Chạy parser" class="da-button blue" style="float:right;margin-right:15px; " />
                                    </span>                              
  
                                </div>
                                <div class="da-panel-content">
                                    <table id="da-ex-datatable-numberpaging" class="da-table">
                                        <thead>
                                            <tr>
                                                <th>STT</th>
                                                <th>Tên Thành Phần</th>
                                                <th>Đường Dẫn</th>
                                                <th>Thao Tác</th>
                                                <th>Trạng Thái</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @{
                                                int counter = 1;
                                                foreach (var item in Model)
                                                {
                                                    string att = item.CodetypeID;
                                                    bool status = item.IsActive;
                                            <tr>
                                                <td>@counter</td>
                                                @if (att.Equals("C")) { 
                                                 <td>CPU</td>
                                                }
                                                else if (att.Equals("H"))
                                                {
                                                <td>HDD</td>
                                                } 
                                                else if (att.Equals("V"))
                                                {
                                                <td>VGA</td>
                                                }
                                                 else if (att.Equals("D"))
                                                {
                                                <td>DISPLAY</td>
                                                }
                                                 else if (att.Equals("R"))
                                                {
                                                <td>RAM</td>
                                                }
                                               <td>@item.ParseAttributelink</td>
                                               <td>
                                                   @Html.ActionLink("Chỉnh sửa","EditParser", new { id= item.ID })
                                               </td>
                                                @if (status) 
                                                {
                                                   <td>
                                                      <input type="submit" value="Hoạt động" class="da-button green" style="width:120px" data-id="@item.ID"/>
                                                  </td>  
                                                }else
                                                {
                                                <td>
                                                     <input type="submit" value="Không hoạt động" class="da-button red"  data-id="@item.ID"/>
                                                  </td>  
                                                }                                               
                                            </tr>
                                                    counter++;    
                                                } 
                                              }
                                                                                                                                               </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>