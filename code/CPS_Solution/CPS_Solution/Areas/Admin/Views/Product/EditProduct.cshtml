@model CPS_Solution.EntityFramework.Product
@using CPS_Solution.EntityFramework;
@using CPS_Solution.Areas.Admin.Models;
@{
    ViewBag.Title = "Tạo Parser";
    List<Store> listStore = ViewBag.listStore;
    List<AliasProduct> listAli = ViewBag.listAlias;
    Layout = "~/Areas/Admin/Views/Shared/_AdminLayout.cshtml";
}
@section headScript
{
    <!-- iOS webapp icons -->
    <link rel="apple-touch-icon" href="touch-icon-iphone.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="touch-icon-ipad.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="touch-icon-retina.png" />

    <!-- CSS Reset -->
    <link rel="stylesheet" type="text/css" href="~/Areas/Admin/Dandelion/css/reset.css" media="screen" />
    <!--  Fluid Grid System -->
    <link rel="stylesheet" type="text/css" href="~/Areas/Admin/Dandelion/css/fluid.css" media="screen" />
    <!-- Theme Stylesheet -->
    <link rel="stylesheet" type="text/css" href="~/Areas/Admin/Dandelion/css/dandelion.theme.css" media="screen" />
    <!--  Main Stylesheet -->
    <link rel="stylesheet" type="text/css" href="~/Areas/Admin/Dandelion/css/dandelion.css" media="screen" />
    <!-- Demo Stylesheet -->
    <link rel="stylesheet" type="text/css" href="~/Areas/Admin/Dandelion/css/demo.css" media="screen" />
    <!-- jQuery JavaScript File -->
    <script type="text/javascript" src="~/Areas/Admin/Dandelion/js/jquery-1.7.2.min.js"></script>
    <!-- jQuery-UI JavaScript Files -->
    <script type="text/javascript" src="~/Areas/Admin/Dandelion/jui/js/jquery-ui-1.8.20.min.js"></script>
    <link rel="stylesheet" type="text/css" href="~/Areas/Admin/Dandelion/jui/css/jquery.ui.all.css" media="screen" />
    <script type="text/javascript" src="@Url.Content("~/Areas/Admin/Dandelion/js/core/dandelion.core.js")"></script>
    <!-- Chosen Plugin -->
    <script type="text/javascript" src="@Url.Content("~/Areas/Admin/Dandelion/plugins/chosen/chosen.jquery.js")"></script>
    <link rel="stylesheet" href="@Url.Content("~/Areas/Admin/Dandelion/plugins/chosen/chosen.css")" media="screen" />
    <!-- Demo JavaScript Files -->
    <script type="text/javascript" src="@Url.Content("~/Areas/Admin/Dandelion/plugins/elastic/jquery.elastic.min.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/Areas/Admin/Dandelion/js/demo/demo.form.js")"></script>
    <!-- Demo JavaScript Files -->
    @*    <script type="text/javascript" src="~/Areas/Admin/Dandelion/js/demo/demo.icons.js"></script>
    <!-- Core JavaScript Files -->*@
    @*    <script type="text/javascript" src="~/Areas/Admin/Dandelion/js/core/dandelion.core.js"></script>*@
    <!-- Customizer JavaScript File (remove if not needed) -->
    <!-- Customizer JavaScript File (remove if not needed) -->
    <script type="text/javascript" src="@Url.Content("~/Areas/Admin/Dandelion/js/core/dandelion.customizer.js")"></script>
    <!-- FileInput Plugin -->
    <script type="text/javascript" src="@Url.Content("~/Areas/Admin/Dandelion/js/jquery.fileinput.js")"></script>


}
@section sidebar
{
    <!-- Main Navigation -->
    <div id="da-main-nav" class="da-button-container">
        <ul>
            <li>
                <a href="#">

                    <span class="da-nav-count">1</span>
                    <!-- Icon Container -->
                    <span class="da-nav-icon">
                        <img src="@Url.Content("~/Areas/Admin/Dandelion/images/icons/white/32/home.png")" alt="Trang chủ" />
                    </span>
                    <strong>Hệ thống</strong>
                </a>
                <ul class="closed">
                    <li>
                        <a href="@Url.Action("ConfigureSystem", "System")">
                            <img src="@Url.Content("~/Areas/Admin/Dandelion/images/icons/news/setting.png")" alt="" />
                            <strong>Cấu hình hệ thống</strong>
                        </a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="#">
                    <!-- Icon Container -->
                    <span class="da-nav-count">2</span>
                    <span class="da-nav-icon">
                        <img src="@Url.Content("~/Areas/Admin/Dandelion/images/icons/white/32/graph.png")" alt="Charts" />
                    </span>
                    <strong>Thống kê</strong>
                </a>
                <ul class="closed">
                    <li>
                        <a href="/admin/ViewRating">
                            <img src="@Url.Content("~/Areas/Admin/Dandelion/images/icons/news/rating.png")" alt="" />
                            <strong>Đánh giá</strong>
                        </a>

                    </li>
                    <li>
                        <a href="@Url.Action("HistoryCompare", "StatisticProduct")">
                            <img src="@Url.Content("~/Areas/Admin/Dandelion/images/icons/news/topsearch.png")" alt="" />
                            <strong>Lịch sử</strong>
                        </a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="#">
                    <!-- Nav Notification -->
                    <span class="da-nav-count">5</span>
                    <!-- Icon Container -->
                    <span class="da-nav-icon">
                        <img src="@Url.Content("~/Areas/Admin/Dandelion/images/icons/white/32/documents_1.png")" alt="Charts" />
                    </span>
                    <strong>Dữ liệu</strong>
                </a>
                <ul class="closed">
                    <li>
                        <a href="/Admin/importexcelLap">
                            <img src="@Url.Content("~/Areas/Admin/Dandelion/images/icons/news/excel.png")" alt="" />
                            <strong>Nhập Laptop từ Excel</strong>
                        </a>

                    </li>
                    <li>
                        <a href="/Admin/importexcel">
                            <img src="@Url.Content("~/Areas/Admin/Dandelion/images/icons/news/excel.png")" alt="" />
                            <strong>Nhập linh kiện từ Excel</strong>
                        </a>

                    </li>
                    <li>

                        <a href="/admin/TraningLaptop">
                            <img src="@Url.Content("~/Areas/Admin/Dandelion/images/icons/news/duplicate.png")" alt="" />
                            <strong>Xử lý Laptop trùng</strong>
                        </a>
                    </li>
                    <li>

                        <a href="/Admin/TrainingProduct">
                            <img src="@Url.Content("~/Areas/Admin/Dandelion/images/icons/news/duplicate.png")" alt="" />
                            <strong>Xử lý linh kiện trùng</strong>
                        </a>
                    </li>

                    <li>

                        <a href="@Url.Action("Createrecommend", "Recommend")">
                            <img src="@Url.Content("~/Areas/Admin/Dandelion/images/icons/news/arrow.png")" alt="" />
                            <strong>Sản phẩm đề xuất</strong>
                        </a>
                    </li>
                </ul>
            </li>
            <li class="active">
                <a href="@Url.Action("Index", "Product")">
                    <span class="da-nav-count">5</span>
                    <!-- Icon Container -->
                    <span class="da-nav-icon">
                        <img src="@Url.Content("~/Areas/Admin/Dandelion/images/icons/white/32/day_calendar.png")" alt="Calendar" />
                    </span>
                    <strong>Quản lí sản phẩm</strong>
                </a>
                <ul>
                    <li>
                        <a href="@Url.Action("CreateProductTest", "Product")">
                            <img src="@Url.Content("~/Areas/Admin/Dandelion/images/icons/news/add.png")" alt="" />
                            <strong>Tạo mới sản phẩm</strong>
                        </a>

                    </li>
                    <li style="background-color: #a6d037;">

                        <a href="@Url.Action("Index", "Product")">
                            <img src="@Url.Content("~/Areas/Admin/Dandelion/images/icons/news/list.png")" alt="" />
                            <strong>Danh sách sản phẩm</strong>
                        </a>
                    </li>
                    <li>

                        <a href="@Url.Action("Index", "ViewFeedback")">
                            <img src="@Url.Content("~/Areas/Admin/Dandelion/images/icons/news/list.png")" alt="" />
                            <strong>Xem góp ý sản phẩm</strong>
                        </a>
                    </li>
                    <li>
                        <a href="@Url.Action("Index", "ViewSearchNotFound")">
                            <img src="@Url.Content("~/Areas/Admin/Dandelion/images/icons/news/topsearch.png")" alt="" />
                            <strong>Lịch sử tìm kiếm</strong>
                        </a>
                    </li>
                    <li>
                        <a href="@Url.Action("Index", "ManagerStore")">
                            <img src="@Url.Content("~/Areas/Admin/Dandelion/images/icons/color/asterisk_orange.png")" alt="" />
                            <strong>Quản lý cửa hàng</strong>
                        </a>
                    </li>
                    <li>

                        <a href="@Url.Action("Index", "ManagerHardware")">
                            <img src="@Url.Content("~/Areas/Admin/Dandelion/images/icons/news/list.png")" alt="" />
                            <strong>Quản lý linh kiện</strong>
                        </a>
                    </li>
                </ul>
            </li>

            <li>
                <a href="#">
                    <!-- Icon Container -->
                    <span class="da-nav-count">1</span>
                    <span class="da-nav-icon">
                        <img src="@Url.Content("~/Areas/Admin/Dandelion/images/icons/white/32/settings.png")" alt="" />
                    </span>
                    <strong>Quản lí trọng số</strong>
                </a>
                <ul class="closed">
                    <li>
                        <a href="@Url.Action("Index", "FillWeightHardWare")">
                            <img src="@Url.Content("~/Areas/Admin/Dandelion/images/icons/news/manager.png")" alt="" />
                            <strong>Danh sách trọng số</strong>
                        </a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="#">
                    <span class="da-nav-count">4</span>
                    <!-- Icon Container -->
                    <span class="da-nav-icon">
                        <img src="@Url.Content("~/Areas/Admin/Dandelion/images/icons/white/32/cog_4.png")" alt="" />
                    </span>
                    <strong>Parser</strong>
                </a>
                <ul class="closed">
                    <li>
                        <a href="@Url.Action("CreateParser", "Parser")">
                            <img src="@Url.Content("~/Areas/Admin/Dandelion/images/icons/news/new.png")" alt="" />
                            <strong>Tạo parser linh kiện</strong>
                        </a>
                    </li>

                    <li>
                        <a href="@Url.Action("Index", "Parser")">
                            <img src="@Url.Content("~/Areas/Admin/Dandelion/images/icons/news/list.png")" alt="" />
                            <strong>Parser linh kiện</strong>
                        </a>
                    </li>
                    @*<li>
                        <a href="#">
                            <img src="@Url.Content("~/Areas/Admin/Dandelion/images/icons/news/new.png")" alt="" />
                            <strong>Tạo parser sản phẩm</strong>
                        </a>
                    </li>*@
                    <li>
                        <a href="@Url.Action("Index", "productparseradmin")">
                            <img src="@Url.Content("~/Areas/Admin/Dandelion/images/icons/news/list.png")" alt="" />
                            <strong>Parser sản phẩm</strong>
                        </a>
                    </li>
                    <li>
                        <a href="@Url.Action("Index", "LogFile")">
                            <img src="@Url.Content("~/Areas/Admin/Dandelion/images/icons/news/log.png")" alt="" />
                            <strong>Danh sách log file</strong>
                        </a>
                    </li>
                </ul>
            </li>
        </ul>
    </div>
}
@section mainHeader
{
    <ul>
        <li style="margin-right: 5px"><a style="cursor: default; font-size: 27px;">
            <img src="@Url.Content("~/Areas/Admin/Dandelion/images/icons/black/16/home.png")" alt=""><strong>Quản lý Laptop</strong></a></li>
        <li style="margin-right: 5px; font-weight: bold">>></li>
        <li class="active">
            <a href="@Url.Action("EditProduct.cshtml", "Product")" style="font-size:20px;font-style:italic;text-decoration:underline">Sửa thông tin</a>
        </li>
    </ul>
}

@section footScript
{
}
<div class="grid_4">
</div>
<div class="grid_4">
    <div class="da-panel">
        <div class="da-panel-header">
            <span class="da-panel-title">
                <img src="~/Areas/Admin/Dandelion/images/icons/color/ui_combo_box.png" />
                Thành Phần Cấu Hình Sản Phẩm
            </span>
        </div>
        <div class="da-panel-content">
            @using (Html.BeginForm("EditProduct", "Product", FormMethod.Post, new { @class = "da-form" }))
            {       
                <div class="da-form-row " style="width: 50%; float: left">
                    <label>Tên Sản Phẩm</label>
                    <div class="da-form-item large">
                        @Html.TextBoxFor(x => x.Name, new {id="idName" })
                    </div>
                </div>
                                     
                <div class="da-form-row " style="width: 50%; float: right">
                    <label>Vi xử lý</label>
                    <div class="da-form-item large">
                        <span class="formNote">Danh sách các CPU</span>
                        @Html.DropDownListFor(x => x.CpuID, ViewBag.cpuList as List<SelectListItem>, new { @class = "chzn-select" })
                    </div>
                </div> 
                <div class="clear"></div>
                                    
                <div class="da-form-row " style="width: 50%; float: left">
                    <label>Link liên quan</label>
                    <div class="da-form-item large">
                        @Html.TextBoxFor(x => x.URL, new {id="idLink" })
                    </div>
                </div>   
                <div class="da-form-row " style="width: 50%; float: right">
                    <label>Bộ Nhớ</label>
                    <div class="da-form-item large">
                        <span class="formNote">Danh sách các Ram</span>
                        @Html.DropDownListFor(x => x.RamID, ViewBag.ramList as List<SelectListItem>, new { @class = "chzn-select" })
                    </div>
                </div> 
                <div class="clear"></div>
                <div class="da-form-row " style="width: 50%; float: left">
                    @{
                                                                        
                String price = String.Format(System.Globalization.CultureInfo.GetCultureInfo("vi-VN"), "{0:c}", @Model.Price);
                price = price.Replace('.', ',');
                price = price.TrimEnd('₫');
                price = price.Trim();
                price = price.TrimEnd('0');
                price = price.TrimEnd('0');
                price = price.TrimEnd(',');
                    }
                    <label>Giá sản phẩm (VND)</label>
                    <div class="da-form-item large">
                        <input id ="idPri" type="text" onchange="changePrice()" value="@price"/>
                        @Html.HiddenFor(x => x.Price, new { id = "idHidPri",value="@price" })
                    </div>
                </div>  
                <div class="da-form-row " style="width: 50%; float: right">
                    <label>Ổ Đĩa Cứng</label>
                    <div class="da-form-item large">
                        <span class="formNote">Danh sách các HDD</span>
                        @Html.DropDownListFor(x => x.HddID, ViewBag.hddList as List<SelectListItem>, new { @class = "chzn-select" })
                    </div>
                </div>        
                <div class="clear"></div>     
                <div class="da-form-row " style="width: 50%; float: left">
                    <label>Ảnh sản phẩm</label>
                    <div class="da-form-item large" style="text-align: center">
                        @*            //-----------image-Popup-div-----*@
                        <a onclick="showPopupiamge()"><strong>Xem hình ảnh sản phẩm</strong> </a>


                        @* ----------------------------*@
                        <!----------------Popup tạo tên phụ----------->
                        <div id="image-Popup-div" style="display: none;">
                            <div class="da-panel">
                                <div class="da-panel-content" style="background: url('/Areas/Admin/Dandelion/images/bg/wood_pattern.jpg'); font-weight: bolder; font-size: 15px">
                                    <img src="/@Model.ImageURL"/>
                                </div>
                            </div>
                        </div>
                        <!----------------Popup------------------>
                        @*                        ---------------------------------------*@
                    </div>
                </div> 
                
                <div class="da-form-row " style="width: 50%; float: right">
                    <label>Card đồ họa</label>
                    <div class="da-form-item large">
                        <span class="formNote">Danh sách các VGA</span>
                        @Html.DropDownListFor(x => x.VgaID, ViewBag.vgaList as List<SelectListItem>, new { @class = "chzn-select" })
                    </div>
                </div>
                                                                 
                <div class="clear"></div> 
                <div class="da-form-row " style="width: 50%; float: left">
                    <label>Hình sản phẩm</label>
                    <div class="da-form-item large">
                        <span class="formNote">Chọn <strong>ảnh đại diện </strong>khác.</span>
                        <input type="file" name="file" class="da-custom-file" accept="image/*" />
                    </div>
                </div>                                                                  
                <div class="da-form-row " style="width: 50%; float: right">
                    <label>Màn hình</label>
                    <div class="da-form-item large">
                        <span class="formNote">Danh sách các loại màn hình</span>
                        @Html.DropDownListFor(x => x.DisplayID, ViewBag.displayList as List<SelectListItem>, new { @class = "chzn-select" })
                    </div>
                </div>
                
                <div class="clear"></div>  
                
                <div class="da-form-row " style="width: 50%; float: left">
                    <label>Hãng</label>
                    <div class="da-form-item large">
                        <span class="formNote">Danh sách các hãng</span>
                        @Html.DropDownListFor(x => x.BrandID, ViewBag.brandList as List<SelectListItem>, new { @class = "chzn-select" })
                    </div>
                </div>                  
                <div class="da-form-row " style="width: 50%; float: right">
                    <label>Cửa hàng</label>
                    <div class="da-form-item large">
                        <span class="formNote">Danh sách các cửa hàng</span>
                        @Html.DropDownListFor(x => x.StoreID, ViewBag.storeList as List<SelectListItem>, new { @class = "chzn-select" })
                    </div>
                </div>         
              
                
                <div class="clear"></div>
                <div class="da-form-row " style="width: 100%;">
                    <label>Tên gọi khác</label>
                    <div class="da-form-item large">
                        <button type="button" class="da-button blue" style="width: 33%" onclick="showPopupCreate()"><strong>Thêm mới</strong> </button>
                        <button type="button" class="da-button blue" style="width: 32%" onclick="showPopupUpdate()"><strong>Thay đổi</strong></button>
                        <button type="button" class="da-button blue"style="width:33%" onclick="location.href='@Url.Action("Index", "ProductShow", new { id1 = Model.ID })'"><strong>Quản lí</strong></button>
                    </div>


                </div>
                <div class="clear"></div>
                <div class="da-form-row">
                    <label>Mô tả chi tiết</label>
                    <div class="da-form-item">
                        <span class="formNote">Chi tiết sản phẩm</span>
                        @Html.TextAreaFor(x => x.Description, new { rows = "auto", cols = "auto" })
                    </div>
                </div>
                <div class="da-button-row">
                    <input type="reset" value="Reset" class="da-button gray left" />
                    <input type="submit" value="Submit" class="da-button blue" />
                </div>
            }

        </div>
    </div>
    <!----------------Popup tạo tên phụ----------->
    <div id="Create-Store-Popup-div" style="display: none;">
        <div class="da-panel">
            <div class="da-panel-content" style="background: url('/Areas/Admin/Dandelion/images/bg/wood_pattern.jpg'); font-weight: bolder; font-size: 15px">
                <form id="da-ex-validate5" class="da-form" style="padding-top: 23px;" novalidate="novalidate">
                    <fieldset class="da-form-inline">
                        <legend>Thông tin tên phụ</legend>
                        <div class="da-form-row">
                            <label>Tên phụ laptop <span class="required">*</span></label>
                            <div class="da-form-item large">
                                <span class="formNote">Tên phụ phải từ 5 tới 100 ký tự</span>
                                <input type="text" id="IdAliasName" value="">
                                <input type="text" id="lapId" value ="@Model.ID"  hidden>
                                <input type="text" id="brandID" value ="@Model.BrandID"  hidden>
                            </div>
                        </div>
                        <div class="da-form-row">
                            <label>Đường dẫn chứa tên phụ sản phẩm<span class="required">*</span></label>
                            <div class="da-form-item large">
                                <span class="formNote">Đường dẫn phải tồn tại</span>
                                <textarea style="height: 80px" id="IdLinkAliasName" rows="3"> </textarea>
                            </div>
                        </div>
                        <div class="da-form-row">
                            <span class="formNote"></span>
                            <label>Giá (VND) <span class="required">*</span></label>
                            <div class="da-form-item large">
                                <span class="formNote">Phải là số nguyên</span>
                                <input type="text" onkeyup="CheckPriceCreate()" name="password" id="IdPriceAliasName">
                            </div>
                        </div>
                        <div class="da-form-row">
                            <label>Cửa Hàng<span class="required">*</span></label>
                            <div class="da-form-item large">
                                <select id="IdStoreAliasName">
                                    @foreach (Store s in listStore)
                                    {
                                        <option value="@s.ID">@s.StoreName</option>
                                    }
                                </select>
                            </div>
                        </div>
                    </fieldset>
                    <div class="da-button-row">
                        <input type="button" value="Tạo mới" onclick="CreateNewAlias()" class="da-button green">
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!----------------Popup------------------>

    <!----------------Popup Sửa tên phụ----------->
    @if (listAli.Count > 0)
    {
        <div id="Update-Store-Popup-div" style="display: none;">
            <div class="da-panel">
                <div class="da-panel-content" style="background: url('/Areas/Admin/Dandelion/images/bg/wood_pattern.jpg'); font-weight: bolder; font-size: 15px">
                    <form id="da-ex-validate6" class="da-form" style="padding-top: 23px;" novalidate="novalidate">
                        <fieldset class="da-form-inline">
                            <legend>Sửa tên phụ sản phẩm</legend>
                            <div class="da-form-row">
                                <label>Chọn tên phụ muốn sửa<span class="required">*</span></label>
                                <div class="da-form-item large">
                                    <span class="formNote">.</span>
                                    @Html.DropDownList("CPUList", ViewBag.completeAlias as List<SelectListItem>, new { @onchange = "Changeinfo(this)", @class = "chzn-select", @style = "width: 388px;" })
                                </div>
                            </div>
                            <div id="changeId">
                                <div class="da-form-row">
                                    <label>Tên phụ sản phẩm<span class="required">*</span></label>
                                    <div class="da-form-item large">
                                        <span class="formNote">Tên phải từ 5 tới 100 ký tự</span>
                                        <input hidden type="text" name="nothing" value="@listAli[0].ID" id="IdAliasNameup1">
                                        <input type="text" name="password" value="@listAli[0].Name" id="IdAliasNameup">
                                    </div>
                                </div>
                                <div class="da-form-row">
                                    <label>Đường dẫn chứa tên phụ sản phẩm<span class="required">*</span></label>
                                    <div class="da-form-item large">
                                        <span class="formNote">Đường dẫn phải tồn tại</span>
                                        <textarea style="height: 80px" id="IdLinkAliasNameUp" rows="3"> @listAli[0].URL</textarea>
                                    </div>
                                </div>
                                <div class="da-form-row">
                                    <span class="formNote"></span>
                                    <label>Giá (VND)<span class="required">*</span></label>
                                    <div class="da-form-item large">
                                        <span class="formNote">Phải là số nguyên</span>
                                        @{
                                                                        
        String price = String.Format(System.Globalization.CultureInfo.GetCultureInfo("vi-VN"), "{0:c}", @listAli[0].Price);
        price = price.Replace('.', ',');
        price = price.TrimEnd('₫');
        price = price.Trim();
        price = price.TrimEnd('0');
        price = price.TrimEnd('0');
        price = price.TrimEnd(',');
                                        }
                                        <input type="text" onload="PriceLoad()" name="password"  value="@price" id="IdPriceAliasNameUp">
                                    </div>
                                </div>
                                <div class="da-form-row">
                                    <label>Cửa Hàng<span class="required">*</span></label>
                                    <div class="da-form-item large">
                                        <select id="IdStoreAliasNameUp">
                                            @foreach (Store s in listStore)
                                            {
                                                <option value="@s.ID">@s.StoreName</option>
                                            }
                                        </select>
                                    </div>
                                    @foreach (AliasProduct ali in listAli)
                                    {
                                        <input hidden  type="text" name="password" value="@ali.Name" id="IdName+@ali.ID">
                                        <input hidden  type="text" name="password" value="@ali.Price" id="IdPrice+@ali.ID">
                                        <input hidden  type="text" name="password" value="@ali.URL" id="IdURL+@ali.ID">
                                        <input hidden type="text" name="password" value="@ali.StoreID" id="IdStore+@ali.ID">  
                                    }

                                </div>
                            </div>
                        </fieldset>
                        <div class="da-button-row">
                            <input type="button" value="Cập Nhập" onclick="UpdateNewAlias()" class="da-button green">
                        </div>
                    </form>
                </div>
            </div>
        </div>
    
        <script type="text/javascript">

            $(document).ready(function () {
                $('#IdStoreAliasNameUp').val(@listAli[0].StoreID);
            });

        </script>
    }
    <!----------------Popup------------------>
</div>
<script>
    $('#idName').blur(function () {
        if ($('#idName').val() == "") {
            document.getElementById("idName").style.borderColor = "red";
        } else {
            document.getElementById("idName").style.borderColor = "";
        }

        if ($('#idName').val() != "" && $('#idLink').val() != "" && $('#idPri').val() != "") {
            document.getElementById("createbutton").disabled = false;
        } else {
            document.getElementById("createbutton").disabled = true;
        }
    });

    $('#idLink').blur(function () {
        if ($('#idLink').val() == "") {
            document.getElementById("idLink").style.borderColor = "red";
        } else {
            document.getElementById("idLink").style.borderColor = "";
        }

        if ($('#idName').val() != "" && $('#idLink').val() != "" && $('#idPri').val() != "") {
            document.getElementById("createbutton").disabled = false;
        } else {
            document.getElementById("createbutton").disabled = true;
        }
    });

    $('#idPri').on('input', function (e) {
        $(this).val(formatCurrency(this.value.replace(/[,$]/g, '')));
        document.getElementById("idHidPri").value = document.getElementById("idPri").value;
        if ($('#idName').val() != "" && $('#idLink').val() != "" && $('#idPri').val() != "") {
            document.getElementById("createbutton").disabled = false;
        } else {
            document.getElementById("createbutton").disabled = true;
        }
    }).on('keypress', function (e) {
        if (!$.isNumeric(String.fromCharCode(e.which))) e.preventDefault();
    }).on('paste', function (e) {
        var cb = e.originalEvent.clipboardData || window.clipboardData;
        if (!$.isNumeric(cb.getData('text'))) e.preventDefault();
    });
    function formatCurrency(number) {
        var n = number.split('').reverse().join("");
        var n2 = n.replace(/\d\d\d(?!$)/g, "$&,");
        return n2.split('').reverse().join('');
    }

    function PriceLoad() {
        return _this.val().toString().replace(/(\d)(?=(\d{3})+(?!\d))/g, "$1,")
    }
    $('#idPri').on('input', function (e) {
        $(this).val(formatCurrency(this.value.replace(/[,$]/g, '')));
    }).on('keypress', function (e) {
        if (!$.isNumeric(String.fromCharCode(e.which))) e.preventDefault();
    }).on('paste', function (e) {
        var cb = e.originalEvent.clipboardData || window.clipboardData;
        if (!$.isNumeric(cb.getData('text'))) e.preventDefault();
    });





    $('#IdPriceAliasName').on('input', function (e) {
        $(this).val(formatCurrency(this.value.replace(/[,$]/g, '')));
    }).on('keypress', function (e) {
        if (!$.isNumeric(String.fromCharCode(e.which))) e.preventDefault();
    }).on('paste', function (e) {
        var cb = e.originalEvent.clipboardData || window.clipboardData;
        if (!$.isNumeric(cb.getData('text'))) e.preventDefault();
    });
    function formatCurrency(number) {
        var n = number.split('').reverse().join("");
        var n2 = n.replace(/\d\d\d(?!$)/g, "$&,");
        return n2.split('').reverse().join('');
    }

    function PriceLoad() {
        alert("abc");
        return _this.val().toString().replace(/(\d)(?=(\d{3})+(?!\d))/g, "$1,")
    }
    $('#IdPriceAliasNameUp').on('input', function (e) {
        $(this).val(formatCurrency(this.value.replace(/[,$]/g, '')));
    }).on('keypress', function (e) {
        if (!$.isNumeric(String.fromCharCode(e.which))) e.preventDefault();
    }).on('paste', function (e) {
        var cb = e.originalEvent.clipboardData || window.clipboardData;
        if (!$.isNumeric(cb.getData('text'))) e.preventDefault();
    });



    //function changePrice() {
    //    document.getElementById("idHidPri").value = document.getElementById("idPri").value;
    //    alert("here");
    //}


    //Hiện popup để tạo tài khoản.
    function showPopupCreate() {
        $("#Create-Store-Popup-div").dialog({
            autoOpen: false,
            title: "Tạo một tên phụ  mới!",
            width: "600",
            modal: true
            //buttons: [{
            //    text: "Đóng", 
            //    click: function() {
            //        $( this ).dialog( "close" );
            //    }}]
        });
        $("#Create-Store-Popup-div").dialog("option", { modal: true }).dialog("open");
        event.preventDefault();
    }


    //Hiện popup để tạo tài khoản.
    function showPopupiamge() {
        $("#image-Popup-div").dialog({
            autoOpen: false,
            title: "Ảnh sản phẩm!",
            width: "300",
            modal: true
            //buttons: [{
            //    text: "Đóng", 
            //    click: function() {
            //        $( this ).dialog( "close" );
            //    }}]
        });
        $("#image-Popup-div").dialog("option", { modal: true }).dialog("open");
        event.preventDefault();
    }

    // change info popup Update dropdownlist onchange
    function Changeinfo(_this) {
        var stt = _this.value;
        document.getElementById('IdAliasNameup').value = document.getElementById('IdName+' + stt).value;
        document.getElementById('IdLinkAliasNameUp').value = document.getElementById('IdURL+' + stt).value;
        document.getElementById('IdPriceAliasNameUp').value = document.getElementById('IdPrice+' + stt).value.replace(/(\d)(?=(\d{3})+(?!\d))/g, "$1,");
        document.getElementById('IdStoreAliasNameUp').value = document.getElementById('IdStore+' + stt).value;
        document.getElementById('IdAliasNameup1').value = stt;
    }


    // load  popup update again
    function loadPopupAjac() {
        var info = document.getElementById("lapId").value;
        var postData = { idN: info };
        $.ajax({
            type: "POST",
            url: "/Admin/Product/loadPopupAjac",
            data: postData,
            success: function (data) {
                $('#Update-Store-Popup-div').html(data);
            },

        });
    }

    //Hiện popup để tạo tài khoản.
    function showPopupUpdate() {
        $("#Update-Store-Popup-div").dialog({
            autoOpen: false,
            title: "Sửa một tên phụ!",
            width: "600",
            modal: true
            //buttons: [{
            //    text: "Đóng", 
            //    click: function() {
            //        $( this ).dialog( "close" );
            //    }}]
        });
        $("#Update-Store-Popup-div").dialog("option", { modal: true }).dialog("open");
        event.preventDefault();
    }

    // Sửa tên phụ
    function UpdateNewAlias() {
        var aliasName = document.getElementById("IdAliasNameup").value;
        var url = document.getElementById("IdLinkAliasNameUp").value;
        var price = document.getElementById("IdPriceAliasNameUp").value;
        var storeid = document.getElementById("IdStoreAliasNameUp").value;
        var id = document.getElementById("IdAliasNameup1").value;
        var info = aliasName + '|' + url + '|' + price + '|' + storeid + '|' + id;


        var count = 0;
        // kiểm tra tên
        if (aliasName.length < 5 || aliasName.length > 100) {
            document.getElementById("IdAliasNameup").style.borderColor = 'red';
            count++;
        } else {
            document.getElementById("IdAliasNameup").style.borderColor = "";
        }


        // kiểm tra giá
        myFunction(price);
        function myFunction(price) {
            val = parseFloat(price);
            if (isNaN(val)) {
                document.getElementById("IdPriceAliasNameUp").style.borderColor = 'red';
                count++;
            } else {
                document.getElementById("IdPriceAliasNameUp").style.borderColor = "";
            }
        }

        if (count == 0) {

            var postData = { newAliasname: info };
            $.ajax({
                type: "POST",
                url: "/Admin/Product/UpdateNewAlias",
                data: postData,
                success: function (data) {
                    if (data == "NotUrl") {
                        document.getElementById("IdLinkAliasNameUp").style.borderColor = 'red';
                    } else {
                        loadPopupAjac();
                        $("#Update-Store-Popup-div").dialog("close");
                    }

                },

            });
        }
    }

    // Tạo một tên phụ
    function CreateNewAlias() {
        var aliasName = document.getElementById("IdAliasName").value;
        var url = document.getElementById("IdLinkAliasName").value;
        var price = document.getElementById("IdPriceAliasName").value;
        var storeid = document.getElementById("IdStoreAliasName").value;
        var brandid = document.getElementById("brandID").value;
        var lapid = document.getElementById("lapId").value;
        var info = aliasName + '|' + url + '|' + price + '|' + storeid + '|' + brandid + '|' + lapid;


        var count = 0;
        // kiểm tra tên
        if (aliasName.length < 5 || aliasName.length > 100) {
            document.getElementById("IdAliasName").style.borderColor = 'red';
            count++;
        } else {
            document.getElementById("IdAliasName").style.borderColor = "";
        }


        // kiểm tra giá
        myFunction(price);
        function myFunction(price) {
            val = parseFloat(price);
            if (isNaN(val)) {
                document.getElementById("IdPriceAliasName").style.borderColor = 'red';
                count++;
            } else {
                document.getElementById("IdPriceAliasName").style.borderColor = "";
            }
        }

        if (count == 0) {

            var postData = { newAliasname: info };
            $.ajax({
                type: "POST",
                url: "/Admin/Product/CreateNewAlias",
                data: postData,
                success: function (data) {
                    if (data == "NotUrl") {
                        document.getElementById("IdLinkAliasName").style.borderColor = 'red';
                    } else {
                        $("#Create-Store-Popup-div").dialog("close");
                        loadPopupAjac();
                        document.getElementById("IdAliasName").value = "";
                        document.getElementById("IdLinkAliasName").value = "";
                        document.getElementById("IdPriceAliasName").value = "";
                        location.reload();
                    }

                },

            });
        }
    }
</script>

<script>
    (function ($) {
        $(document).ready(function (e) {
            // dialog popup
            $("#da-ex-accordion, #da-ex-accordion-plain").accordion();

            $("#da-ex-tabs, #da-ex-tabs-plain").tabs();

            $("#da-ex-datepicker, #da-ex-datepicker-inline").datepicker({ showOtherMonths: true });

            $("#da-ex-datepicker-week").datepicker({ showOtherMonths: true, showWeek: true });

            $("#da-ex-datepicker-months").datepicker({ showOtherMonths: true, numberOfMonths: 3 });

            $("#da-ex-datetimepicker").datetimepicker();

            $("#da-ex-timepicker").timepicker({});

            $(".da-ex-buttons").button();

            $("#da-ex-buttons-radio, #da-ex-buttons-checkbox").buttonset();

            $("#da-ex-buttons-icon button:first").button({
                icons: {
                    primary: "ui-icon-locked"
                },
                text: false
            }).next().button({
                icons: {
                    primary: "ui-icon-locked"
                }
            }).next().button({
                icons: {
                    primary: "ui-icon-gear",
                    secondary: "ui-icon-triangle-1-s"
                }
            }).next().button({
                icons: {
                    primary: "ui-icon-gear",
                    secondary: "ui-icon-triangle-1-s"
                },
                text: false
            });

            $("#da-ex-dialog-div").dialog({
                autoOpen: false,
                title: "Chọn log file bạn muốn ghi lại, để sau đó có thể tiếp tục xử lý.",
                modal: true,
                width: "550",
                buttons: [{
                    text: "Đóng",
                    click: function () {
                        $(this).dialog("close");
                    }
                }]
            });




            $("#da-ex-dialog").bind("click", function (event) {
                $("#da-ex-dialog-div").dialog("option", { modal: false }).dialog("open");
                event.preventDefault();
            });
            $("#da-ex-dialog-modal").bind("click", function (event) {
                $("#da-ex-dialog-div").dialog("option", { modal: true }).dialog("open");
                event.preventDefault();
            });
            $("#da-ex-dialog-form").bind("click", function (event) {
                $("#da-ex-dialog-form-div").dialog("option", { modal: true }).dialog("open");
                event.preventDefault();
            });
            //  Growl Notifications 
            if ($.jGrowl) {

                $("#da-ex-growl-2").bind("click", function (event) {
                    $.jGrowl("Con cò bé bé", { header: "Nhắc nhở!", position: "bottom-right" });
                });
            }
        });
    })(jQuery); 		</script>

