@model CPS_Solution.EntityFramework.RecommendProduct



@{
    ViewBag.Title = "Recommend";
    Layout = "~/Views/Shared/_Compare.cshtml";
    
}


@using System.Web.Optimization

@Scripts.Render("~/Scripts/jquery")
@Scripts.Render("~/Scripts/knockout")

<div class="breadcrumb-container" @*style="height:60px"*@>
    <div class="container">
        <div class="relative">
            <ul class="bc push-up unstyled clearfix">
                <li>Trang chủ</li>
                <li>Sản phẩm</li>
                <li class="active">Đề xuất sản phầm</li>
            </ul>
        </div>
    </div>
</div>

<script>
    $(document).ready(function () {
        $("input[name$='recommend']").click(function () {
            var type = $(this).val();
            $("div.desc").hide();
            $("#recommend" + type).fadeIn(1500);
        });
    });
</script>

<main id="main-content" role="main">
    <div class="container">
        <div class="row">
            <div class="m-t-b clearfix">
                <section class="col-xs-12 col-sm-8 col-md-5">
                    <div id="myRadioGroup">
                        <div>
                            <h3>Chọn kiểu đề xuất sản phẩm</h3>
                        </div> 
                        <div>
                            <p>
                                <input type="radio" name="recommend" checked="checked" value="1" />
                                <span>Bằng đường dẫn</span>
                            </p>
                            <p>
                                <input type="radio" name="recommend" value="2" />
                                <span>Bằng thông tin chi tiết</span>
                            </p>
                        </div>
                        <div class="m-t-b" />
                        <div class="panel panel-default desc" id="recommend1">
	                        <div class="panel-heading">
		                        <h4 class="panel-title">
			                        <p>Đề xuất bằng đường dẫn sản phẩm</p>
		                        </h4>
	                        </div>
	                                <div class="panel-collapse collapse in">
		                        <div class="panel-body">
                                    @using (Html.BeginForm())
                                    {
                                        @Html.ValidationSummary(true)
                                        //Product name
                                        <div class="form-group stylish-input">
                                            <label class="required">Tên sản phẩm</label>
                                            @Html.TextBoxFor(model => model.Name, new { @class = "form-control" })
                                            @Html.ValidationMessageFor(model => model.Name)
                                        </div>
                                        //Product url
                                        <div class="form-group stylish-input">
                                            <label class="required">Đường dẫn sản phẩm</label>
                                            @Html.TextBoxFor(model => model.Parselink, new { @class = "form-control",id ="link" })
                                            @Html.ValidationMessageFor(model => model.Parselink)
                                            <input type="button" value="Kiểm tra" onclick="LinkCheck()" />
                                            <div id="status" />
                                        </div>                                        
                                        <p><input type="submit" id="btnSubmit" disabled="disabled" value="Gửi đề xuất" class="btn btn-info btn-xsp pull-right"/></p>
                                    }
		                        </div>
	                        </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>
</main>

<script type="text/javascript">
    function LinkCheck() {
        document.getElementById("btnSubmit").disabled = true;
        $("#status").html("<img src='@Url.Content("~/Images/I/loading.gif")' width='25px'" +
                    "height='25px'/><span style='color:blue'>  Đang kiểm tra....</span>");
        $.post("/Product/checkLink",
        { link: $("#link").val() },
        function (data) {
            if (data == 1) {
                $("#status").html("<img src='@Url.Content("~/Images/I/good.gif")' width='25px'" + "height='25px'/><span style='color:green'>Đường dẫn có thực.</span>");
                $("#link").css('background-color', '');
                document.getElementById("btnSubmit").disabled = false;
            }
            else {
                $("#status").html("<img src='@Url.Content("~/Images/I/bad.gif")' width='25px'" + "height='25px'/><span style='color:red'>Đường dẫn không có thực.</span>");
                $("#link").css('background-color', '#e97878');
                document.getElementById("btnSubmit").disabled = true;
            }
        });
    }
</script>
@*@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}*@


