@model IEnumerable<CPS_Solution.EntityFramework.Product>
@{
    ViewBag.Title = "Tìm kiếm";
    Layout = "~/Views/Shared/_MainLayout.cshtml";
}

@section navigator
{
    <div id="top-image" class="top-image3">
        <div class="container">
            <div id="top-image-caption">
                <h2>tìm sản phẩm</h2>
            </div>
        </div>
    </div>
}
<div class="page-element gray-element">

    @using (Html.BeginForm("SearchForProduct", "Product", FormMethod.Post, new { @class = "form-wrapper cf" }))
    {
        @Html.TextBox("productName", ViewBag.CurrentFilter as string, new { placeholder = "Từ khóa..." })
        <button type="submit">Tìm kiếm</button>               
    }
    @if (Model.Count() > 0)
    {
        <div id="loadItemcontainer" class="row">
            @{Html.RenderAction("ProductList", "Product", new { Model = Model });}
        </div>
        <div id="loadingDiv" style="text-align: center; display: none; margin-left: 580px; margin-bottom: 20px; height: 32px; width: 32px">
            <img alt="Loading" src="@Url.Content("~/Images/112.gif")" />
        </div>

    }
    else
    {
        <div class="row">
            <div class="isotope-item post span12">
                <br>
                <br>
                <div class="product" style="border: none">
                    <center>
                    <h4>
                        <strong>Rất tiếc, chúng tôi không tìm thấy kết quả nào phù hợp với từ khóa của bạn.</strong>
                    </h4>
                </center>
                    <h3>
                        <p class="text-warning">Hãy thử lại với những cách sau: </p>
                    </h3>

                    <table>
                        <tr>
                            <td><span class="label label-success">1)</span></td>
                            <td>
                                <h4>Kiểm tra lại từ khóa có thể bạn đã gõ sai (Ví dụ: Asus3500 = Ass3500)</h4>
                            </td>
                        </tr>
                        <tr>
                            <td><span class="label label-success">2)</span></td>
                            <td>
                                <h4>Dùng từ khóa ngắn gọn và đơn giản hơn.</h4>
                            </td>
                        </tr>
                        <tr>
                            <td><span class="label label-success">3)</span></td>
                            <td>
                                <h4>Click vào <a href="@Url.Action("Recommend", "Product")"><span style="color: blue;">đây</span></a> để thử lại.</h4>
                            </td>
                        </tr>
                        <tr>
                            <td><span class="label label-success">4)</span><br />
                                <br />
                                <br />
                                <br />
                                <br />
                                <br />
                                <br />
                            </td>
                            <td>
                                <h4>Vẫn không tìm thấy sản phẩm bạn muốn. Xin hãy cung cấp cho chúng tôi thông tin về sản phẩm.  
                                <br />
                                    <br />
                                    Bạn có thể lựa chọn gửi cho chúng tôi một trong hai thông tin dưới đây:
				                <br />
                                    - Nguồn gốc - Đường dẫn tới trang web chứa sản phẩm bạn muốn được gợi ý.
                                <br />
                                    - Cấu hình -  cấu hình sản phẩm mà bạn muốn được gợi ý.
				                <br />
                                    <br />
                                    Chúng tôi sẽ liên lạc với bạn thông báo về tình trạng sản phẩm này.
                                </h4>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>

        </div>
      
    }

</div>
@*Compare cart*@
<div id="compare_panel" style="display: block;">
    <h3>So sánh<a class="compare-close"></a></h3>
    <ul></ul>
    <label class="compare-button">
        <span>So sánh</span>
    </label>
</div>

<script type="text/javascript">

    $(document).ready(function () {
        checkSession();
    });
</script>
<script type="text/javascript">
    var BlockNumber = 2;  //Infinate Scroll starts from second block
    var NoMoreData = false;
    var inProgress = false;

    $(window).scroll(function () {
        if ($(window).scrollTop() == $(document).height() -
        $(window).height() && !NoMoreData && !inProgress) {

            inProgress = true;
            $("#loadingDiv").show();

            $.post("@Url.Action("InfinateScroll",
            "Product")", { "BlockNumber": BlockNumber },
                    function (data) {

                        BlockNumber = BlockNumber + 1;
                        NoMoreData = data.NoMoreData;
                        $("#loadItemcontainer").append(data.HTMLString);
                        $("#loadingDiv").hide();
                        inProgress = false;
                    });
        }
    });
</script>
