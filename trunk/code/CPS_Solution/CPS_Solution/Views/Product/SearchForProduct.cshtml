@model IEnumerable<CPS_Solution.EntityFramework.Product>
@{
    ViewBag.Title = "Tìm kiếm";
    Layout = "~/Views/Shared/_MainLayout.cshtml";
}

@section navigator
{
    <div id="top-image" class="top-image3">
        <div class="container">
            <div id="top-image-caption">
                <h2>tìm sản phẩm</h2>
            </div>
        </div>
    </div>
}
<div class="page-element gray-element">

    @using (Html.BeginForm("SearchForProduct", "Product", FormMethod.Post, new { @class = "form-wrapper cf" }))
    {
        @Html.TextBox("productName", ViewBag.CurrentFilter as string, new { placeholder = "Từ khóa..." })
        <button type="submit">Tìm kiếm</button>               
    }
    @if (Model.Count() > 0)
    {
        <div id="loadItemcontainer" class="row">
            @{Html.RenderAction("ProductList", "Product", new { Model = Model });}
        </div>
        <div id="loadingDiv" style="text-align: center; display: none; margin-left: 580px; margin-bottom: 20px; height: 32px; width: 32px">
            <img alt="Loading" src="@Url.Content("~/Images/112.gif")" />
        </div>

    }
    else
    {
        <div class="row">

            <div class="page-element standard-element-container-1">
                <div class="container element-container standard-element">
                    <div class="row">
                        <div class="span6 element-image-left fadeLeft animated fadeInLeft" style="visibility: visible;">
                            <img class="standard-element-image" src="~/Template/stylish.holobest.com/images/element-image1.png" alt="standard-element-image" style="width:600px;height:467px">
                        </div>

                        <div class="span6 fadeRight animated fadeInRight" style="visibility: visible;">
                            <h3>Rất tiếc, chúng tôi không tìm thấy kết quả nào phù hợp với từ khóa của bạn.</h3>
                            <ul class="list unstyled custom-list-small">
                                <li><i class="icon-ok"></i>
                                    <p>Hãy thử lại với những cách sau:</p>
                                </li>
                            </ul>
                            <ul class="list unstyled custom-list-small">
                                <li><i class="icon-ok"></i>
                                    <p>Kiểm tra lại <strong>từ khóa</strong> có thể bạn đã gõ sai <strong><u>(Ví dụ: Asus3500 = As3500)</u></strong> </p>
                                </li>
                            </ul>
                            <ul class="list unstyled custom-list-small">
                                <li><i class="icon-ok"></i>
                                    <p>Dùng từ khóa <strong>ngắn gọn</strong> và <strong>đơn giản</strong> hơn.</p>
                                </li>
                            </ul>
                            <ul class="list unstyled custom-list-small">
                                <li><i class="icon-ok"></i>
                                    <p><strong>Vẫn không tìm thấy</strong> sản phẩm bạn muốn. Xin hãy <strong>cung cấp</strong> cho chúng tôi thông tin về sản phẩm.</p>
                                </li>
                            </ul>
                            <ul class="list unstyled custom-list-small">
                                <li><i class="icon-ok"></i>
                                    <p>Chúng tôi sẽ <strong>liên lạc</strong> với bạn và <strong>thông báo</strong> về tình trạng sản phẩm này.</p>
                                </li>
                            </ul>
                            <ul class="list unstyled custom-list-small">
                                <li><i class="icon-ok"></i>
                                    <p>Click vào <a href="@Url.Action("SearchForProduct", "Product")"><span style="color: blue;">đây</span></a> để tìm với từ khóa khác.</p>
                                </li>
                            </ul>
                            <div class="stylish-button">
                                <a href="@Url.Action("Recommend", "Product")"><i class="icon-thumbs-up"></i>Đề xuất sản phẩm</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div> 
    }

</div>
@*Compare cart*@
<div id="compare_panel" style="display: block;">
    <h3>So sánh<a class="compare-close"></a></h3>
    <ul></ul>
    <label class="compare-button">
        <span>So sánh</span>
    </label>
</div>

<script type="text/javascript">

    $(document).ready(function () {
        checkSession();
    });
</script>
<script type="text/javascript">
    var BlockNumber = 2;  //Infinate Scroll starts from second block
    var NoMoreData = false;
    var inProgress = false;

    $(window).scroll(function () {
        if ($(window).scrollTop() == $(document).height() -
        $(window).height() && !NoMoreData && !inProgress) {

            inProgress = true;
            $("#loadingDiv").show();

            $.post("@Url.Action("InfinateScroll",
            "Product")", { "BlockNumber": BlockNumber },
                    function (data) {

                        BlockNumber = BlockNumber + 1;
                        NoMoreData = data.NoMoreData;
                        $("#loadItemcontainer").append(data.HTMLString);
                        $("#loadingDiv").hide();
                        inProgress = false;
                    });
        }
    });
</script>
